# VelaNova Audit — 20250924T112833Z (UTC)

- Base: /home/pudding/Projects/VelaNova
- Host: Linux pop-os 6.16.3-76061603-generic #202508231538~1757385336~22.04~8f363f2 SMP PREEMPT_DYNAMIC Tue S x86_64 x86_64 x86_64 GNU/Linux
- User: pudding


## OS / Kernel / GPU / Tooling

```
OS:
No LSB modules are available.
Distributor ID:	Pop
Description:	Pop!_OS 22.04 LTS
Release:	22.04
Codename:	jammy

Kernel:
Linux 6.16.3-76061603-generic

GPU:
GPU 0: NVIDIA GeForce RTX 2070 with Max-Q Design (UUID: GPU-e03951aa-f813-5ebe-a5a0-bc071e39b32e)
name, driver_version, memory.total [MiB]
NVIDIA GeForce RTX 2070 with Max-Q Design, 570.172.08, 8192 MiB

Python:
Python 3.10.12

Docker:
Docker version 27.5.1, build 27.5.1-0ubuntu3~22.04.2
Docker Compose version v2.39.2

NVIDIA Container Toolkit:
cli-version: 1.12.1
lib-version: 1.12.1
build date: 2023-03-21T16:54+00:00
build revision: 41335937dcf88680b29dca7d23b4102c2d2f2f2f
build compiler: x86_64-linux-gnu-gcc-9 11.2.0
build platform: x86_64
build flags: -D_GNU_SOURCE -D_FORTIFY_SOURCE=2 -fPIC -Wdate-time -D_FORTIFY_SOURCE=2 -std=gnu11 -O2 -g -fdata-sections -ffunction-sections -fplan9-extensions -fstack-protector -fno-strict-aliasing -fvisibility=hidden -Wall -Wextra -Wcast-align -Wpointer-arith -Wmissing-prototypes -Wnonnull -Wwrite-strings -Wlogical-op -Wformat=2 -Wmissing-format-attribute -Winit-self -Wshadow -Wstrict-prototypes -Wunreachable-code -Wconversion -Wsign-conversion -Wno-unknown-warning-option -Wno-format-extra-args -Wno-gnu-alignof-expression -fPIC -g -O2 -fdebug-prefix-map=/home/jenkins/workspace/pop-os/repos/_build/ci/git/libnvidia-container/d17aa6f4960e1d386abadf2288403efa4c1753ab/jammy/partial.source/archive=. -fstack-protector-strong -Wformat -Werror=format-security -I/usr/include/tirpc -Wl,-zrelro -Wl,-znow -Wl,-zdefs -Wl,--gc-sections -Wl,-Bsymbolic-functions -Wl,-z,relro
```


## Project tree (depth 3)

```
/home/pudding/Projects/VelaNova
├── compose
│   ├── data
│   │   └── open-webui
│   ├── docker-compose.yml
│   └── docker-compose.yml.bak
├── config
│   ├── settings.yaml
│   └── voice.yaml
├── docs
│   ├── audits
│   │   ├── AUDIT-20250917T173921Z.md
│   │   ├── AUDIT-20250917T174322Z.md
│   │   ├── AUDIT-20250917T175130Z.md
│   │   ├── AUDIT-20250917T191059Z.md
│   │   ├── AUDIT-20250918T103939Z.md
│   │   ├── AUDIT-20250918T104303Z.md
│   │   ├── AUDIT-20250919T103941Z.md
│   │   ├── AUDIT-20250921T094932Z.md
│   │   ├── AUDIT-20250923T135405Z.md
│   │   ├── AUDIT-20250924T064435Z.md
│   │   ├── AUDIT-20250924T082137Z.md
│   │   ├── AUDIT-20250924T091145Z.md
│   │   └── AUDIT-20250924T112833Z.md
│   ├── IMPLEMENTATION_PLAN.md
│   ├── INSTRUCTIONS.md
│   ├── OPERATIONS.md
│   ├── PHASE_A_ACCEPTANCE.md
│   ├── PHASE_A_ACCEPTANCE.md.20250917T191059Z.bak
│   ├── PHASE_B_ACCEPTANCE.md
│   ├── PHASE_C_ACCEPTANCE.md
│   ├── PHASE_C_COMPLETION.md
│   ├── PHASE_C_PROOF_20250919.txt
│   ├── PHASE_D_ACCEPTANCE.md
│   ├── PHASE_E_ACCEPTANCE.md
│   ├── Phase E Completion (Dev Mode).md
│   ├── PHASE_F_ACCEPTANCE.md
│   └── SNAPSHOTS.md
├── logs
│   ├── last_output-chunk0.wav
│   ├── last_output-earcon.wav
│   ├── last_output.wav
│   ├── mic_probe.wav
│   ├── phaseG-fast10b.log
│   ├── phaseG-fast10.log
│   ├── phaseG-test.log
│   ├── phaseG-ttfa10.log
│   ├── tts_smoke.wav
│   ├── voice_loop-20250915.log
│   ├── voice_loop-20250916.log
│   ├── voice_loop-20250917.log
│   ├── voice_loop-20250918.log
│   ├── voice_loop-20250919.log
│   ├── voice_loop-20250919.log.1
│   ├── voice_loop-20250919.log.2
│   ├── voice_loop-20250919.log.3
│   ├── voice_loop-20250919.log.4
│   ├── voice_loop-20250919.log.5
│   ├── voice_loop-20250919.log.6
│   ├── voice_loop-20250919.log.7
│   ├── voice_loop-20250921.log
│   ├── voice_loop-20250923.log
│   └── voice_loop-20250924.log
├── memory
│   ├── db
│   │   └── memory.sqlite
│   ├── docs
│   ├── index
│   ├── logs
│   └── tmp
├── models
│   ├── llama3.2-coder.Modelfile
│   ├── ollama
│   │   ├── id_ed25519
│   │   ├── id_ed25519.pub
│   │   └── models
│   ├── oww
│   ├── piper
│   │   └── en
│   ├── wake
│   │   ├── alexa_v0.1.tflite
│   │   ├── embedding_model.tflite
│   │   ├── hey_jarvis_v0.1.tflite
│   │   ├── hey_mycroft_v0.1.tflite
│   │   ├── hey_rhasspy_v0.1.tflite
│   │   ├── melspectrogram.tflite
│   │   ├── timer_v0.1.tflite
│   │   └── weather_v0.1.tflite
│   └── whisper
│       └── small
├── orchestrator
│   ├── check_env.py
│   ├── memory_selftest.py
│   ├── memory_store.py
│   ├── mic_probe.py
│   ├── __pycache__
│   │   ├── memory_store.cpython-310.pyc
│   │   └── voice_loop.cpython-310.pyc
│   └── voice_loop.py
└── tools
    └── audit.sh

25 directories, 75 files
```


## Key files present

```
[OK] orchestrator/voice_loop.py (41916 bytes)
[OK] config/settings.yaml (2464 bytes)
[OK] compose/docker-compose.yml (727 bytes)
[OK] docs/SNAPSHOTS.md (2114 bytes)
```


## Python virtualenv packages (.venv)

```
Python 3.10.12
ctranslate2        4.6.0
faster-whisper     1.2.0
onnxruntime        1.16.3
openwakeword       0.6.0
piper-tts          1.3.0
scipy              1.15.3
sounddevice        0.5.2
soundfile          0.13.1
```


## Listening ports (Jarvis-related)

```
LISTEN 0      4096         0.0.0.0:11434      0.0.0.0:*                                         
LISTEN 0      4096         0.0.0.0:3000       0.0.0.0:*                                         
LISTEN 0      4096            [::]:11434         [::]:*                                         
LISTEN 0      4096            [::]:3000          [::]:*                                         
```


## Docker Compose status

```
NAME          IMAGE                                  COMMAND               SERVICE      CREATED      STATUS                PORTS
vela_ollama   ollama/ollama:0.3.13                   "/bin/ollama serve"   ollama       7 days ago   Up 3 hours            0.0.0.0:11434->11434/tcp, [::]:11434->11434/tcp
vela_webui    ghcr.io/open-webui/open-webui:latest   "bash start.sh"       open-webui   7 days ago   Up 7 days (healthy)   0.0.0.0:3000->8080/tcp, [::]:3000->8080/tcp
```


## Ollama models available

```
```


## Audio devices (ALSA/Pulse)

```
**** List of CAPTURE Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 0: ALC295 Analog [ALC295 Analog]
  Subdevices: 1/1
  Subdevice #0: subdevice #0

49	alsa_output.pci-0000_00_1f.3.analog-stereo.monitor	PipeWire	s32le 2ch 48000Hz	RUNNING
50	alsa_input.pci-0000_00_1f.3.analog-stereo	PipeWire	s32le 2ch 48000Hz	SUSPENDED
```


## Latest orchestrator logs

```
Showing: /home/pudding/Projects/VelaNova/logs/voice_loop-20250924.log
2025-09-24 08:58:11,148 [INFO] capture_end {"sec": 2.31, "blocks": 77}
2025-09-24 08:58:11,148 [INFO] await_wake_capture {"len_ms": 2310}
2025-09-24 08:58:11,710 [INFO] stt_retry_vad {"used": true}
2025-09-24 08:58:11,710 [INFO] stt_done {"dur_ms": 561, "len_s": 2.31}
2025-09-24 08:58:11,710 [INFO] await_wake {"mode": "mic"}
2025-09-24 08:58:11,711 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 08:58:14,113 [INFO] capture_end {"sec": 0.81, "blocks": 27}
2025-09-24 08:58:14,114 [INFO] await_wake_capture {"len_ms": 810}
2025-09-24 08:58:14,685 [INFO] stt_retry_vad {"used": true}
2025-09-24 08:58:14,688 [INFO] stt_done {"dur_ms": 573, "len_s": 0.81}
2025-09-24 08:58:14,688 [INFO] await_wake {"mode": "mic"}
2025-09-24 08:58:14,689 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 08:58:17,099 [INFO] capture_end {"sec": 1.74, "blocks": 58}
2025-09-24 08:58:17,099 [INFO] await_wake_capture {"len_ms": 1740}
2025-09-24 08:58:17,646 [INFO] stt_done {"dur_ms": 547, "len_s": 1.74}
2025-09-24 08:58:17,646 [INFO] heard_text {"text": "I never"}
2025-09-24 08:58:17,648 [INFO] await_wake {"mode": "mic"}
2025-09-24 08:58:17,648 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 08:58:20,066 [INFO] capture_end {"sec": 2.31, "blocks": 77}
2025-09-24 08:58:20,066 [INFO] await_wake_capture {"len_ms": 2310}
2025-09-24 08:58:20,629 [INFO] stt_retry_vad {"used": true}
2025-09-24 08:58:20,629 [INFO] stt_done {"dur_ms": 562, "len_s": 2.31}
2025-09-24 08:58:20,630 [INFO] await_wake {"mode": "mic"}
2025-09-24 08:58:20,630 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 08:58:23,052 [INFO] capture_end {"sec": 0.57, "blocks": 19}
2025-09-24 08:58:23,053 [INFO] await_wake_capture {"len_ms": 570}
2025-09-24 08:58:23,619 [INFO] stt_retry_vad {"used": true}
2025-09-24 08:58:23,619 [INFO] stt_done {"dur_ms": 565, "len_s": 0.57}
2025-09-24 08:58:23,619 [INFO] await_wake {"mode": "mic"}
2025-09-24 08:58:23,619 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 08:58:26,039 [INFO] capture_end {"sec": 2.25, "blocks": 75}
2025-09-24 08:58:26,040 [INFO] await_wake_capture {"len_ms": 2250}
2025-09-24 08:58:26,596 [INFO] stt_retry_vad {"used": true}
2025-09-24 08:58:26,596 [INFO] stt_done {"dur_ms": 556, "len_s": 2.25}
2025-09-24 08:58:26,597 [INFO] await_wake {"mode": "mic"}
2025-09-24 08:58:26,597 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 08:58:29,004 [INFO] capture_end {"sec": 2.31, "blocks": 77}
2025-09-24 08:58:29,004 [INFO] await_wake_capture {"len_ms": 2310}
2025-09-24 08:58:29,577 [INFO] stt_retry_vad {"used": true}
2025-09-24 08:58:29,577 [INFO] stt_done {"dur_ms": 572, "len_s": 2.31}
2025-09-24 08:58:29,577 [INFO] await_wake {"mode": "mic"}
2025-09-24 08:58:29,578 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 08:58:32,438 [INFO] capture_end {"sec": 0.03, "blocks": 1}
2025-09-24 08:58:32,439 [INFO] await_wake_capture {"len_ms": 30}
2025-09-24 08:58:32,888 [INFO] stt_retry_vad {"used": true}
2025-09-24 08:58:32,888 [INFO] stt_done {"dur_ms": 449, "len_s": 0.03}
2025-09-24 08:58:32,889 [INFO] await_wake {"mode": "mic"}
2025-09-24 08:58:32,889 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:03:01,678 [INFO] boot {"log_file": "/home/pudding/Projects/VelaNova/logs/voice_loop-20250924.log", "time": "2025-09-24T09:03:01"}
2025-09-24 09:03:01,678 [WARNING] forcing_stt_cpu {'device': 'cuda', 'env': {'STT_DEVICE': None, 'CTRANSLATE2_DEVICE': None}, 'compute_type': 'int8_float16'}
2025-09-24 09:03:02,811 [INFO] stt_ready {"device": "cpu", "compute_type": "int8", "model": "tiny", "local": false}
2025-09-24 09:03:02,811 [INFO] dev_mode {"enabled": true, "model": "llama3.2-coder:local"}
2025-09-24 09:03:02,819 [INFO] memory_doc {"doc_id": "706877721c53408e889742cc9050e662"}
2025-09-24 09:03:02,819 [INFO] loop_start {"wake_phrases": ["velanova", "hey velanova", "hey nova", "wake nova"], "stop_phrase": "sleep nova"}
2025-09-24 09:03:02,819 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:03:02,819 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:03:05,233 [INFO] capture_end {"sec": 1.44, "blocks": 48}
2025-09-24 09:03:05,233 [INFO] await_wake_capture {"len_ms": 1440}
2025-09-24 09:03:05,861 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:03:05,861 [INFO] stt_done {"dur_ms": 627, "len_s": 1.44}
2025-09-24 09:03:05,861 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:03:05,862 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:03:08,283 [INFO] capture_end {"sec": 1.77, "blocks": 59}
2025-09-24 09:03:08,283 [INFO] await_wake_capture {"len_ms": 1770}
2025-09-24 09:03:08,851 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:03:08,853 [INFO] stt_done {"dur_ms": 568, "len_s": 1.77}
2025-09-24 09:03:08,853 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:03:08,853 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:03:11,270 [INFO] capture_end {"sec": 1.89, "blocks": 63}
2025-09-24 09:03:11,271 [INFO] await_wake_capture {"len_ms": 1890}
2025-09-24 09:03:11,849 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:03:11,849 [INFO] stt_done {"dur_ms": 578, "len_s": 1.89}
2025-09-24 09:03:11,850 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:03:11,850 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:03:15,579 [INFO] capture_end {"sec": 0.03, "blocks": 1}
2025-09-24 09:03:15,580 [INFO] await_wake_capture {"len_ms": 30}
2025-09-24 09:03:16,043 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:03:16,044 [INFO] stt_done {"dur_ms": 463, "len_s": 0.03}
2025-09-24 09:03:16,044 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:03:16,045 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:03:18,459 [INFO] capture_end {"sec": 1.8, "blocks": 60}
2025-09-24 09:03:18,460 [INFO] await_wake_capture {"len_ms": 1800}
2025-09-24 09:03:19,024 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:03:19,025 [INFO] stt_done {"dur_ms": 565, "len_s": 1.8}
2025-09-24 09:03:19,025 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:03:19,026 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:03:21,446 [INFO] capture_end {"sec": 0.39, "blocks": 13}
2025-09-24 09:03:21,446 [INFO] await_wake_capture {"len_ms": 390}
2025-09-24 09:03:22,013 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:03:22,016 [INFO] stt_done {"dur_ms": 569, "len_s": 0.39}
2025-09-24 09:03:22,016 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:03:22,016 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:03:24,859 [INFO] capture_end {"sec": 0.03, "blocks": 1}
2025-09-24 09:03:24,860 [INFO] await_wake_capture {"len_ms": 30}
2025-09-24 09:03:25,321 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:03:25,321 [INFO] stt_done {"dur_ms": 461, "len_s": 0.03}
2025-09-24 09:03:25,322 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:03:25,322 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:03:31,793 [INFO] capture_end {"sec": 0.03, "blocks": 1}
2025-09-24 09:03:31,793 [INFO] await_wake_capture {"len_ms": 30}
2025-09-24 09:03:32,240 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:03:32,241 [INFO] stt_done {"dur_ms": 446, "len_s": 0.03}
2025-09-24 09:03:32,241 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:03:32,241 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:03:34,651 [INFO] capture_end {"sec": 1.14, "blocks": 38}
2025-09-24 09:03:34,652 [INFO] await_wake_capture {"len_ms": 1140}
2025-09-24 09:03:35,219 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:03:35,219 [INFO] stt_done {"dur_ms": 566, "len_s": 1.14}
2025-09-24 09:03:35,219 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:03:35,220 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:10:19,484 [INFO] boot {"log_file": "/home/pudding/Projects/VelaNova/logs/voice_loop-20250924.log", "time": "2025-09-24T09:10:19"}
2025-09-24 09:10:20,793 [INFO] stt_ready {"device": "cuda", "compute_type": "int8_float16", "model": "tiny", "local": false}
2025-09-24 09:10:20,794 [INFO] dev_mode {"enabled": true, "model": "llama3.2-coder:local"}
2025-09-24 09:10:20,801 [INFO] memory_doc {"doc_id": "e6941d9228f04e3f8a154ae1cf32d9e7"}
2025-09-24 09:10:20,801 [INFO] loop_start {"wake_phrases": ["velanova", "hey velanova", "hey nova", "wake nova"], "stop_phrase": "sleep nova"}
2025-09-24 09:10:20,801 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:10:20,801 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:10:23,214 [INFO] capture_end {"sec": 2.37, "blocks": 79}
2025-09-24 09:10:23,215 [INFO] await_wake_capture {"len_ms": 2370}
2025-09-24 09:44:00,831 [INFO] boot {"log_file": "/home/pudding/Projects/VelaNova/logs/voice_loop-20250924.log", "time": "2025-09-24T09:44:00"}
2025-09-24 09:44:02,295 [INFO] stt_ready {"device": "cuda", "compute_type": "int8_float16", "model": "tiny", "local": false}
2025-09-24 09:44:02,295 [INFO] dev_mode {"enabled": true, "model": "llama3.2-coder:local"}
2025-09-24 09:44:02,303 [INFO] memory_doc {"doc_id": "bf3c9363fab441978fbb2356e60347af"}
2025-09-24 09:44:02,303 [INFO] loop_start {"wake_phrases": ["velanova", "hey velanova", "hey nova", "wake nova"], "stop_phrase": "sleep nova"}
2025-09-24 09:44:02,303 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:44:02,303 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:44:04,705 [INFO] capture_end {"sec": 2.13, "blocks": 71}
2025-09-24 09:44:04,705 [INFO] await_wake_capture {"len_ms": 2130}
2025-09-24 09:44:05,806 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:44:05,806 [INFO] stt_done {"dur_ms": 1100, "len_s": 2.13}
2025-09-24 09:44:05,806 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:44:05,807 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:44:08,226 [INFO] capture_end {"sec": 1.77, "blocks": 59}
2025-09-24 09:44:08,226 [INFO] await_wake_capture {"len_ms": 1770}
2025-09-24 09:44:08,326 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:44:08,326 [INFO] stt_done {"dur_ms": 99, "len_s": 1.77}
2025-09-24 09:44:08,327 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:44:08,327 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:44:20,341 [INFO] capture_timeout {"stage": "preroll"}
2025-09-24 09:44:20,344 [INFO] await_wake_capture {"len_ms": 0}
2025-09-24 09:44:20,345 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:44:20,345 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 09:44:25,912 [INFO] capture_end {"sec": 0.03, "blocks": 1}
2025-09-24 09:44:25,912 [INFO] await_wake_capture {"len_ms": 30}
2025-09-24 09:44:25,979 [INFO] stt_retry_vad {"used": true}
2025-09-24 09:44:25,979 [INFO] stt_done {"dur_ms": 66, "len_s": 0.03}
2025-09-24 09:44:25,980 [INFO] await_wake {"mode": "mic"}
2025-09-24 09:44:25,980 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 10:46:08,688 [INFO] boot {"log_file": "/home/pudding/Projects/VelaNova/logs/voice_loop-20250924.log", "time": "2025-09-24T10:46:08"}
2025-09-24 10:46:10,071 [INFO] stt_ready {"device": "cuda", "compute_type": "int8_float16", "model": "tiny", "local": false}
2025-09-24 10:46:10,071 [INFO] dev_mode {"enabled": true, "model": "llama3.2-coder:local"}
2025-09-24 10:46:10,079 [INFO] memory_doc {"doc_id": "a56eab4826b64f13a15edd93f1f4b94b"}
2025-09-24 10:46:10,079 [INFO] loop_start {"wake_phrases": ["velanova", "hey velanova", "hey nova", "wake nova"], "stop_phrase": "sleep nova"}
2025-09-24 10:46:10,079 [INFO] await_wake {"mode": "mic"}
2025-09-24 10:46:10,079 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 10:46:12,483 [INFO] capture_end {"sec": 2.31, "blocks": 77}
2025-09-24 10:46:12,484 [INFO] await_wake_capture {"len_ms": 2310}
2025-09-24 10:46:13,168 [INFO] stt_done {"dur_ms": 684, "len_s": 2.31}
2025-09-24 10:46:13,169 [INFO] heard_text {"text": "I know, but..."}
2025-09-24 10:46:13,170 [INFO] await_wake {"mode": "mic"}
2025-09-24 10:46:13,170 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 10:46:15,576 [INFO] capture_end {"sec": 1.08, "blocks": 36}
2025-09-24 10:46:15,576 [INFO] await_wake_capture {"len_ms": 1080}
2025-09-24 10:46:15,685 [INFO] stt_done {"dur_ms": 108, "len_s": 1.08}
2025-09-24 10:46:15,686 [INFO] heard_text {"text": "What is the current way?"}
2025-09-24 10:46:15,694 [INFO] wake_question_heuristic {"heard": "What is the current way?"}
2025-09-24 10:46:15,696 [INFO] wake_remainder {"text": "What is the current way?"}
2025-09-24 10:46:15,697 [INFO] user_text_prefill {"text": "What is the current way?"}
2025-09-24 10:46:15,702 [INFO] retrieve_pre_ctx {"snippet": "codeword=73; mascot=dire wolf.\n---\n, using memory only, answer in one line: codeword=<token>; mascot=<value>.\n---\nThe VelaNova project mascot is a dire wolf.\n--"}
2025-09-24 10:46:15,703 [INFO] retrieve_context {"k": 6, "hits": 0, "ids": [], "pre_ctx_chars": 297}
2025-09-24 10:46:30,593 [INFO] llm_done {"dur_ms": 14889}
2025-09-24 10:46:30,605 [INFO] tts_start {}
2025-09-24 10:46:45,713 [INFO] tts_synth {"engine": "piper", "dur_ms": 15107}
2025-09-24 10:47:21,656 [INFO] turn_timing {"total_ms": 71576, "tts_ms": 15108}
2025-09-24 10:47:21,657 [INFO] await_wake {"mode": "mic"}
2025-09-24 10:47:21,657 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 10:47:24,074 [INFO] capture_end {"sec": 2.34, "blocks": 78}
2025-09-24 10:47:24,075 [INFO] await_wake_capture {"len_ms": 2340}
2025-09-24 10:47:24,271 [INFO] stt_retry_vad {"used": true}
2025-09-24 10:47:24,271 [INFO] stt_done {"dur_ms": 196, "len_s": 2.34}
2025-09-24 10:47:24,271 [INFO] await_wake {"mode": "mic"}
2025-09-24 10:47:24,272 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 10:47:27,146 [INFO] capture_end {"sec": 0.03, "blocks": 1}
2025-09-24 10:47:27,146 [INFO] await_wake_capture {"len_ms": 30}
2025-09-24 10:47:27,221 [INFO] stt_retry_vad {"used": true}
2025-09-24 10:47:27,222 [INFO] stt_done {"dur_ms": 74, "len_s": 0.03}
2025-09-24 10:47:27,222 [INFO] await_wake {"mode": "mic"}
2025-09-24 10:47:27,222 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 10:47:29,642 [INFO] capture_end {"sec": 2.34, "blocks": 78}
2025-09-24 10:47:29,642 [INFO] await_wake_capture {"len_ms": 2340}
2025-09-24 10:47:29,860 [INFO] stt_retry_vad {"used": true}
2025-09-24 10:47:29,860 [INFO] stt_done {"dur_ms": 217, "len_s": 2.34}
2025-09-24 10:47:29,861 [INFO] await_wake {"mode": "mic"}
2025-09-24 10:47:29,861 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
2025-09-24 10:47:32,266 [INFO] capture_end {"sec": 0.45, "blocks": 15}
2025-09-24 10:47:32,266 [INFO] await_wake_capture {"len_ms": 450}
2025-09-24 10:47:32,363 [INFO] stt_retry_vad {"used": true}
2025-09-24 10:47:32,363 [INFO] stt_done {"dur_ms": 96, "len_s": 0.45}
2025-09-24 10:47:32,364 [INFO] await_wake {"mode": "mic"}
2025-09-24 10:47:32,364 [INFO] capture_begin {"timeout_s": 2.4, "vad": "rms"}
```


## settings.yaml snapshot (keys only, redacted)

```
# V2 — Phase C/D: live mic + hard/soft wake, Whisper (CUDA), Piper (local), and durable local memory (SQLite)
# Notes:
# - Hard-wake uses *.onnx models in /home/pudding/Projects/VelaNova/models/wake/
# - "hey jarvis"/"hey mycroft"/"alexa" are hard-wake (KWS); "velanova" variants are soft-wake (STT fallback).
# - Mic uses system default (index -1) so Pulse/PipeWire handle 48k↔16k reliably.
# - Phase D uses a local SQLite DB under ~/Projects/VelaNova/memory/db/memory.sqlite.

version: 2

wake:
  engine: openwakeword
  mode: mic
  model_dir: /home/pudding/Projects/VelaNova/models/wake
  model_glob: "*.tflite"
  sensitivity: 0.48
  min_silence_ms: 600
  trigger_debounce_ms: 1500
  phrases:
    - hey jarvis
    - hey mycroft
    - alexa
  stop_phrase: "sleep nova"

stt:
  engine: soft
  mode: text
  impl: faster-whisper
  model: small
  device: cuda                # cuda | cpu
  compute_type: int8_float16
  beam_size: 1
  sample_rate: 16000
  vad:
    enable: true
    method: webrtc
    max_silence_ms: 900
  chunk_ms: 2048

tts:
  streaming: true
  chunk_chars: 160
  linger_ms: 150
  crossfade_ms: 60
  max_queue: 3
  earcon_if_ttfa_ms: 450
  engine: soft
  mode: text
  voice: en_GB-cori-high
  voice_path: /home/pudding/Projects/VelaNova/models/piper/en/en_GB/cori/high/en_GB-cori-high.onnx
  config_path: /home/pudding/Projects/VelaNova/models/piper/en/en_GB/cori/high/en_GB-cori-high.onnx.json
  sample_rate: 22050
  rate: 1.00
  volume: 1.00
  length_scale: 1.00
  noise_scale: 0.667
  temp_wav: /home/pudding/Projects/VelaNova/logs/last_output.wav

llm:
  provider: ollama
  endpoint: http://localhost:11434
  model: llama3.2:3b
  options:
    num_ctx: 4096
    temperature: 0.5
    max_tokens: 256
  system_prompt: |
    You are VelaNova. Be concise and clear when speaking responses aloud.


dev:
  enabled: true
  coder_model: llama3.2-coder:local
# === Phase D: Durable Memory (local only) ===
memory:
  engine: sqlite
  path: /home/pudding/Projects/VelaNova/memory/db/memory.sqlite
  recall:
    k: 5
  retention:
    max_turns: 5000
    prune_on_start: false
  logging:
    enabled: true

orchestrator:
  input_device_index: -1
  output_device_index: -1
  max_turn_seconds: 45
  listen_timeout_seconds: 12
  grace_after_tts_ms: 300
  mode: text

logging:
  file: /home/pudding/Projects/VelaNova/logs/voice_loop-%Y%m%d.log
  level: INFO
  rotate_days: 7

# Guardrails
connected:
  enabled: false

security:
  egress_block_expected: true
```


## Summary checklist

- [ ] All containers healthy (docker compose ps)
- [ ] Wake word active (no false triggers in quiet room)
- [ ] STT on GPU (faster-whisper) confirmed in logs
- [ ] TTS voice OK (Piper running, voice selected)
- [ ] LLM models present in Ollama (deepseek-r1:7b, qwen2.5-coder:7b)
- [ ] Orchestrator round-trip < 2.5s median
- [ ] Memory DB directory present (.chroma)
